{% extends 'base.html.twig' %}

{% block title %}Users{% endblock %}

{% block body %}
    
    <div class="d-flex justify-content-center"><a href="{{ path('app_users_new') }}" class="btn btn-lg btn-green m-2">Ajouter un utilisateur</a><a href="{{ path('app_societe_index') }}" class="btn btn-lg btn-orange m-2">Voir les sociétés</a><a href="{{ path('app_societe_index') }}" class="btn btn-lg btn-orange m-2">Ajouter une société</a></div>

    <!-- Tabs navs -->
    <ul class="nav nav-tabs nav-justified mb-3" id="myTab" role="tablist">
        <li class="nav-item" role="presentation">
            <button class="nav-link active" id="users-tab" data-bs-toggle="tab" data-bs-target="#users" type="button" role="tab" aria-controls="users" aria-selected="true">Tous les utilisateurs</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="clients-tab" data-bs-toggle="tab" data-bs-target="#clients" type="button" role="tab" aria-controls="clients" aria-selected="false">Les clients</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="internes-tab" data-bs-toggle="tab" data-bs-target="#internes" type="button" role="tab" aria-controls="internes" aria-selected="false">Le personnel interne</button>
        </li>
    </ul>
    <!-- Tabs navs -->

    <!-- Tabs content -->
    <div class="tab-content" id="myTabContent">
        <div class="tab-pane fade show active" id="users" role="tabpanel" aria-labelledby="ex3-tab-1">
            <table class="table">
                <thead class="bg-violet">
                    <tr>
                        <th>Nom</th>
                        <th>Prénom</th>
                        <th>Email</th>
                        <th>Rôle</th>
                        <th>Société</th>
                        <th>actions</th>
                    </tr>
                </thead>
                <div class="utilisateurs"> {% for user in users %} </div>
                <tbody>
                    <td><a href="{{ path('app_users_show', {'id': user.id}) }}" title="Accès à sa fiche">{{ user.nom }}</a></td>
                    <td>{{ user.prenom }}</td>
                    <td>{{ user.email }}</td>
                    <td>
                    {% for role in user.roles %}
                        {{ role }}
                    {% endfor %}
                    </td> 
                    <td>{{ user.societe.nom }}</td>
                    <td>
                        <a href="{{ path('app_users_show', {'id': user.id}) }}" class="btn btn-green"><i class="fa-solid fa-magnifying-glass"></i> Voir plus</a>
                        <a href="{{ path('app_users_fiche', {'id': user.id}) }}" class="btn btn-bleu">modifier</a>
                    </td>
                </tbody>
                {% endfor %}
            </table>
        </div>
        <div class="tab-pane fade" id="clients" role="tabpanel" aria-labelledby="ex3-tab-2">
            <table class="table">
                <thead class="bg-violet">
                    <tr>
                        <th>Nom</th>
                        <th>Prénom</th>
                        <th>Email</th>
                        <th>Rôle</th>
                        <th>Société</th>
                        <th>actions</th>
                    </tr>
                </thead>
                <div class="utilisateurs"> {% for user in clients %} </div>
                <tbody>
                    <td><a href="{{ path('app_users_show', {'id': user.id}) }}" title="Accès à sa fiche">{{ user.nom }}</a></td>
                    <td>{{ user.prenom }}</td>
                    <td>{{ user.email }}</td>
                    <td>
                    {% for role in user.roles %}
                        {{ role }}
                    {% endfor %}
                    </td> 
                    <td>{{ user.societe.nom }}</td>
                    <td>
                        <a href="{{ path('app_users_show', {'id': user.id}) }}" class="btn btn-green"><i class="fa-solid fa-magnifying-glass"></i> Voir plus</a>
                        <a href="{{ path('app_users_fiche', {'id': user.id}) }}" class="btn btn-bleu">modifier</a>
                    </td>
                </tbody>
                {% endfor %}
            </table>
        </div>
        <div class="tab-pane fade" id="internes" role="tabpanel" aria-labelledby="ex3-tab-3">
            <table class="table">
                <thead class="bg-violet">
                    <tr>
                        <th>Nom</th>
                        <th>Prénom</th>
                        <th>Email</th>
                        <th>Rôle</th>
                        <th>Société</th>
                        <th>actions</th>
                    </tr>
                </thead>
                <div class="utilisateurs"> {% for user in internes %} </div>
                <tbody>
                    <td><a href="{{ path('app_users_show', {'id': user.id}) }}" title="Accès à sa fiche">{{ user.nom }}</a></td>
                    <td>{{ user.prenom }}</td>
                    <td>{{ user.email }}</td>
                    <td>
                    {% for role in user.roles %}
                        {{ role }}
                    {% endfor %}
                    </td> 
                    <td>{{ user.societe.nom }}</td>
                    <td>
                        <a href="{{ path('app_users_show', {'id': user.id}) }}" class="btn btn-green"><i class="fa-solid fa-magnifying-glass"></i> Voir plus</a>
                        <a href="{{ path('app_users_fiche', {'id': user.id}) }}" class="btn btn-bleu">modifier</a>
                    </td>
                </tbody>
                {% endfor %}
            </table>
        </div>
    </div> 
    <!-- Tabs content -->
{% endblock %}

